<!DOCTYPE html>
<html lang="en">

<%- include('head.ejs', { title: 'Prelaunch', stylesheet: '/css/view-prelaunch.css' }) %>

<body>

  <%- include('navbar.ejs', { user: user }) %>
    <div id="app">
      <div class="bg-dark text-body py-lg-4 mt-lg-4">
        <div class="container p-5 " style="height:12rem;">
          <h1 class="text-center  fw-bold " id="campaign-title">
            <%=campaign.title%>
          </h1>
          <p style="display:none" id="campid">
            <%=campaign.id%>
          </p>
        </div>
                    <div class="col-2 text-end">
                      <div class="">
                        <!-- <button id="goToDonationPage" class="btn btn-success btn-lg me-4">Donate</button> -->
                        <button id="followButton" class="btn btn-warning btn-lg " @click="toggleFollow">{{ isFollowing ? 'Unfollow' :
                          'Follow' }}</button>
                      </div>
                    </div>
      </div>
      <div class="p-4  bg-body">
        <div class="container-fluid">
          <div class="row p-3 ">
            <div class="col-lg-6 p-5" style="padding-top: 20rem">
              <div class="mb-1 d-flex">
              <i class="fas fa-map-marker-alt fa-2x"></i><p class="fs-4 text-black-50 mx-3"><%=campaign.city%>, <%=campaign.state%></p>
              </div>
              <p class="fs-4 mb-3 text-black lead">
                <%=campaign.description%>
              </p>
              <button id="followButton" class="btn btn-warning btn-lg" @click="toggleFollow">{{ isFollowing ? 'Unfollow' : 'Follow' }}</button>
            </div>

            <div class="col-lg-6">
              <img class="img-fluid align-content-end pb-0" src="/uploads/<%=campaign.campaign_img%>"
                alt="main-image" />
            </div>
          </div>
        </div>
      </div>

<% if (campaign.campaign_video) { %>
      <div class="p-4 bg-warning h-75 d-flex align-items-center justify-content-center">
        <div class="container row">
          <h2 class="text-black display-4 pb-4 text-center">Watch to Learn More</h2>
          <div class="ratio ratio-16x9 mx-auto">
            <iframe src="<%= campaign.campaign_video%>" title="YouTube video" allowfullscreen></iframe>
          </div>
        </div>
      </div>
<% } %>


      <!--- Three Column Section -->
      <div class="container-fluid p-5 w-75">
        <div class="row welcome text-center ">
          <div class="col-12">
            <h2 class="display-4 pb-4 text-black-50">
              Why Choose Us?
            </h2>
            <div class=" align-content-center ">
              <p class="d-block fs-4 mb-3 text-black lead" id="main-feature">
                <%=campaign.feature%>
              </p>
              <img src="/uploads/<%=campaign.feature_img%>" alt="main-feature-image"
                class="d-block img-fluid mx-auto" style="width:40rem; height:auto;" />
            </div>
          </div>
        </div>
      </div>
      <!-- <div class="container-fluid p-4 bg-dark h-75">
        <div class="d-flex flex-column align-items-center justify-content-center h-100">
          <h2 class="text-danger display-4 pb-4">Check Out Our Gallery</h2>
          <div id="carouselExampleIndicators" class="carousel slide w-75">
            <div class="carousel-indicators">
              <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active"
                aria-current="true" aria-label="Slide 1"></button>
              <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1"
                aria-label="Slide 2"></button>
              <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2"
                aria-label="Slide 3"></button>
            </div>
            <div class="carousel-inner">
              <div class="carousel-item active">
                <img src="https://mdbcdn.b-cdn.net/img/new/slides/041.webp" class="d-block w-100" alt="...">
              </div>
              <div class="carousel-item">
                <img src="https://mdbcdn.b-cdn.net/img/new/slides/042.webp" class="d-block w-100" alt="...">
              </div>
              <div class="carousel-item">
                <img src="https://mdbcdn.b-cdn.net/img/new/slides/043.webp" class="d-block w-100" alt="...">
              </div>
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators"
              data-bs-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators"
              data-bs-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Next</span>
            </button>
          </div>
        </div>
      </div> -->
     <div class="container-fluid p-5 w-75">
  <div class="row welcome text-sm-start align-items-center">
    <div class="col-6">
      <h2 class="display-4 pb-4 text-black-50">
        Contact Us
      </h2>
    </div>
    <div class="col-6 d-flex justify-content-center align-items-center">
      <a href="<%=campaign.fb_url%>" class="btn btn-danger btn-lg mx-3">
        <i class="fab fa-facebook-f"></i>
      </a>
      <a href="<%=campaign.twitter_url%>" class="btn btn-danger btn-lg mx-3">
        <i class="fab fa-twitter"></i>
      </a>
      <a href="<%=campaign.yt_url%>" class="btn btn-danger btn-lg mx-3">
        <i class="fab fa-youtube"></i>
      </a>
      <a href="<%=campaign.website_url%>" class="btn btn-danger btn-lg mx-3">
        <i class="fas fa-globe"></i>
      </a>
    </div>
  </div>
</div> 

     
    </div>
     <%- include('footer.ejs') %>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
      integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
      crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
      crossorigin="anonymous"></script>
              <script>
                const goalAmount = parseFloat('<%= campaign.goal_amount %>');
                const cid = '<%= campaign.id %>';
                const city = '<%= campaign.city %>';
                const state = '<%= campaign.state %>';
                const amountRaised = 5000;
                new Vue({
                  el: '#app',
                  data: {
                    isFollowing: false,
                    amountRaised: 5000,
                    totalGoal: goalAmount,// Set the initial amount raised here
                    city: 'Gazipur', // Set the city here
                    state: 'Dhaka', // Set the state here
                    following: cid,
                  },
                  methods: {
                    toggleFollow() {
                      this.isFollowing = !this.isFollowing
                      this.sendData();
                    },
                    sendData() {
                      // Use the inputValue from the data
                      const data = { test: this.following };

                      fetch("/follow/submit", {
                        method: "POST",
                        headers: {
                          "Content-Type": "application/json",
                        },
                        body: JSON.stringify(data),
                      })
                        .then((response) => response.json())
                        // .then((responseData) => {
                        //   console.log(responseData);
                        // })
                        .catch((error) => {
                          console.log(error);
                        });
                    },
                  },
                  computed: {
                    sliderPercentage() {
                      return Math.floor((this.amountRaised / this.totalGoal) * 100)
                    },
                    sliderStyle() {
                      const color = this.sliderPercentage > 0 ? 'green' : 'grey'
                      return `width: ${this.sliderPercentage}%; background-color: ${color};`
                    },
                  },
                })

              </script>


</body>

</html>